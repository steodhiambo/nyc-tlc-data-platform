# PostgreSQL Configuration for Query Auditing
# This configuration enables detailed logging for pgBadger analysis

# Enable logging
log_statement = 'all'                    # Log all SQL statements
log_min_duration_statement = 0          # Log all statements (0ms = all)
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '  # Detailed log prefix
log_checkpoints = on
log_connections = on
log_disconnections = on
log_lock_waits = on
log_temp_files = 0                      # Log all temporary files
log_autovacuum_min_duration = 0         # Log all autovacuum activity

# Performance-related logging settings
track_activities = on                   # Track running commands
track_counts = on                       # Track function and index statistics
track_io_timing = on                    # Track I/O timing
track_functions = all                   # Track all functions
stats_temp_directory = '/tmp/pg_stat_tmp'  # Temporary stats directory

# Log file configuration
log_destination = 'stderr'              # Log to standard error
logging_collector = on                  # Enable logging collector
log_directory = '/var/log/postgresql'   # Log directory
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'  # Log file naming
log_rotation_age = 1d                   # Rotate logs daily
log_rotation_size = 100MB              # Also rotate by size
log_truncate_on_rotation = on          # Truncate on rotation

# Performance optimization for logging (in production, may want to adjust)
log_duration = on                       # Log statement durations
log_error_verbosity = default          # Error verbosity level